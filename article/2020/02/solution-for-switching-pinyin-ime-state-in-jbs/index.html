<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Solution for switching between lowercase and Chinese pinyin with Caps Lock in Jetbrains IDEs - arjenzhou</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="TL;DR:
Add TICapsLockLanguageSwitchCapable - true to your input method&rsquo;s Info.plist[1]
Background Last month I encountered a problem with Chinese input method (Rime, Baidu, Sogou, etc), the symptoms is that I couldn&rsquo;t switch between pinyin and lowercase letters with the Caps Lock which can pressed by my little finger in Jetbrains IDEs, which has been my habit since I used macOS.
Before using third-party input methods, it works well with apple pinyin method."><meta property="og:image" content><meta property="og:title" content="Solution for switching between lowercase and Chinese pinyin with Caps Lock in Jetbrains IDEs"><meta property="og:description" content="TL;DR:
Add TICapsLockLanguageSwitchCapable - true to your input method&rsquo;s Info.plist[1]
Background Last month I encountered a problem with Chinese input method (Rime, Baidu, Sogou, etc), the symptoms is that I couldn&rsquo;t switch between pinyin and lowercase letters with the Caps Lock which can pressed by my little finger in Jetbrains IDEs, which has been my habit since I used macOS.
Before using third-party input methods, it works well with apple pinyin method."><meta property="og:type" content="article"><meta property="og:url" content="/article/2020/02/solution-for-switching-pinyin-ime-state-in-jbs/"><meta property="article:section" content="article"><meta property="article:published_time" content="2020-02-12T00:00:00+00:00"><meta property="article:modified_time" content="2020-02-12T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Solution for switching between lowercase and Chinese pinyin with Caps Lock in Jetbrains IDEs"><meta name=twitter:description content="TL;DR:
Add TICapsLockLanguageSwitchCapable - true to your input method&rsquo;s Info.plist[1]
Background Last month I encountered a problem with Chinese input method (Rime, Baidu, Sogou, etc), the symptoms is that I couldn&rsquo;t switch between pinyin and lowercase letters with the Caps Lock which can pressed by my little finger in Jetbrains IDEs, which has been my habit since I used macOS.
Before using third-party input methods, it works well with apple pinyin method."><link href=/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=/css/main.39ebaad9fc9f12a7ee415682ebf69793198eb40de807ad546a08fe9ad5e51438.css><link id=darkModeStyle rel=stylesheet type=text/css href=/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css media="(prefers-color-scheme: dark)"><link rel=stylesheet href=/katex/katex.min.css><script defer src=/katex/katex.min.js></script><script defer src=/katex/contrib/auto-render.js onload=renderMathInElement(document.body)></script><script src=https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js></script></head><body><div class=content><header><div class=main><a href=/>arjenzhou</a></div><nav><a href=/article>Article</a>
<a href=/translation>Translation</a>
<a href=/reproduction>Reproduction</a>
<a href=/categories>Category</a>
<a href=/feed.xml>Subscribe</a></nav></header><main><article><div class=title><h1 class=title>Solution for switching between lowercase and Chinese pinyin with Caps Lock in Jetbrains IDEs</h1><span class=link></span><div class=meta>Posted on Feb 12, 2020</span><hr></div></div><section class=body><p>TL;DR:</p><p>Add <code>TICapsLockLanguageSwitchCapable - true</code> to your input method&rsquo;s Info.plist[1]</p><h2 id=background>Background</h2><p>Last month I encountered a problem with Chinese input method (Rime, Baidu, Sogou, etc), the symptoms is that I couldn&rsquo;t switch between pinyin and lowercase letters with the Caps Lock which can pressed by my little finger in Jetbrains IDEs, which has been my habit since I used macOS.</p><p>Before using third-party input methods, it works well with apple pinyin method. But the restriction of it drives me to seek any other IMEs. Rime is a good choice which fits the need of programmers but something of cloud is one of the shortcomings. But none of these is a obstacle except the defect that switching between English and Chinese. My Rime&rsquo;s configuration is something like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>patch</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ascii_composer/good_old_caps_lock</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ascii_composer/switch_key</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Caps_Lock</span>: <span style=color:#ae81ff>commit_code</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Shift_L</span>: <span style=color:#ae81ff>noop</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Shift_R</span>: <span style=color:#ae81ff>noop</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Control_L</span>: <span style=color:#ae81ff>noop</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Control_R</span>: <span style=color:#ae81ff>noop</span>
</span></span></code></pre></div><p>as what I said above, it doesn&rsquo;t work in any of Jetbrains IDEs. Unfortunately, as long as it is a Chinese input method, then it won&rsquo;t work.</p><h2 id=a-solution-maybe>A Solution? Maybe</h2><p>There are some solutions that not solve the situation fundamentally.</p><ul><li>use shift to switch the state of IME.</li><li>use other software to modify the Caps Lock key map.</li></ul><p>You will be very disappointed if you get such solutions after a hard searching. Yes, that&rsquo;s not my solution.</p><h2 id=follow-my-step>Follow my step</h2><p>Of course I should ask Jetbrains for help, but after searching in the issue tracker they seems not practiced in solve Chinese IME problems. Swtiching Java runtime does totally not work.</p><p>In fact, apple IME do switch by changing from ABC to Chinese pinyin (2 IMEs). But Baidu or Sogou provides a drop-down bar for selecting the switch key to change its state and, I can start from this.</p><p>After macOS 10.15, there is a public interface enables the Caps Lock key to switch between Latin and non-Latin input sources[1]. So wo can add this into my IME which have not added it.</p><p>There is a feasible method by terminal:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Library/Input Methods/<span style=color:#f92672>[</span>YOUR IME.app<span style=color:#f92672>]</span>/Contents <span style=color:#f92672>&amp;&amp;</span> sudo /usr/libexec/PlistBuddy -c <span style=color:#e6db74>&#39;Add :TICapsLockLanguageSwitchCapable bool true&#39;</span> Info.plist
</span></span></code></pre></div><p>You can verify it with</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/usr/libexec/PlistBuddy -c <span style=color:#e6db74>&#39;print&#39;</span> Info.plist | grep TICapsLockLanguageSwitchCapable
</span></span></code></pre></div><p>which will return <code>true</code>.</p><p>Or you can edit it with a plist editor directly.</p><hr><p>[1] <a href="https://developer.apple.com/documentation/bundleresources/information_property_list/ticapslocklanguageswitchcapable?language=objc">https://developer.apple.com/documentation/bundleresources/information_property_list/ticapslocklanguageswitchcapable?language=objc</a></p></section><div class=post-tags></div></article><h1>Comments:</h1><div id=cusdis_thread data-host=https://cusdis.com data-app-id=71c1c07d-0104-4d23-9cbc-827c46070d54 data-page-id=7f2939c4213a9075ff61e9a9c3b706c4 data-page-url=/article/2020/02/solution-for-switching-pinyin-ime-state-in-jbs/ data-page-title="Solution for switching between lowercase and Chinese pinyin with Caps Lock in Jetbrains IDEs"></div><script async defer src=https://cusdis.com/js/cusdis.es.js></script></main><footer><hr>⚡️
2024 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer></div></body></html>