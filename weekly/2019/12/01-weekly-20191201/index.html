<!doctype html><link href=https://cdn.bootcss.com/highlight.js/9.12.0/styles/monokai.min.css rel=stylesheet><script src=https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Weekly-20191201 | 剪径小贼</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>Home</a></li><li><a href=/post/>Post</a></li><li><a href=/weekly/>Weekly</a></li><li><a href=/categories/>Categories</a></li><li><a href=/tags/>Tags</a></li><li><a href=/about/>About</a></li><li><a href=/index.xml>Subscribe</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>Weekly-20191201</span></h1><h2 class=date>2019/12/01</h2></div><main><ol><li><p>挑了一本上周下载的 Operating Systems: Three easy pieces <sup class=footnote-ref id=fnref:http-pages-cs-wi><a href=#fn:http-pages-cs-wi>1</a></sup>. 来读，这次尝试不用翻译阅读，起初看地比较吃力，后来觉得越来越顺畅了。这本书从虚拟化、并发和持久化三个方面介绍，这种结构更容易把知识打穿，也是我选择这本书的原因。读了7个 chapter 也发现了几个问题，和群里的朋友们探讨了一下：</p><h3 id=q1-获取系统时间-gettimeofday-是否会进行系统调用>Q1: 获取系统时间(gettimeofday())是否会进行系统调用？</h3><ul><li>Switching Between Processes<ul><li>A Non-Cooperative Approach: The OS Takes Control<br><ul><li>A timer device can be programmed to raise an interrupt every so many milliseconds; when the interrupt is raised, the currently running process is halted, and a pre-conﬁgured interrupt handler in the OS runs. At this point, the OS has regained control of the CPU, and thus can do what it pleases: stop the current process, and start a different one.</li></ul></li></ul></li></ul><p>思考：
Timer 用于进程切换，此外系统的时间也由它进行维护，那么每次获取系统时间是否会进行系统调用？</p><p>A：
每个 OS 有不同的实现，对于 OSX 来说，不需要。commpage 会异步地从内核更新包括时间的地址空间。</p><blockquote><p>Briefly, it is a special area of kernel memory that is mapped into the last eight pages of the address space of every process. Among other things, it contains time values that are &ldquo;updated asynchronously from the kernel and read atomically from user space, leading to occasional failures in reading&rdquo;.<sup class=footnote-ref id=fnref:https-stackoverf><a href=#fn:https-stackoverf>2</a></sup></p></blockquote><h3 id=q2-为什么-unix-使用-fork-exec-的形式创建进程-而不是直接-create>Q2: 为什么 UNIX 使用 fork-exec 的形式创建进程，而不是直接 create</h3><p><center><img src=/pic/2019-12-01-weekly/fork-exec.png alt></center>
<center>图1，Operating Systems: Three easy pieces 对于 UNIX 采用 fork-exec 的解释</center></p><p>A:
简单来说，采用 fork-exec 可以根据需求组合成不同的应用，而且对于 UNIX 中管道操作较为友好。</p><hr></li><li><p>毕业体检也完成了，不得不说我校的医生专业能力特别强：不需要仪器直接就能测出血压&hellip;</p></li><li><p>庆余年开播了，不得不说我实在不能接受男主角的选角😓</p></li><li><p>leetcode 开始二刷，7天做了9道题。状态就是：easy 秒，medium 在纸上画画能出来， hard 看了题解也得想半天🤣</p></li><li><p>初中同学来大连看演出，陪他逛了逛。大连这个季节加上下雨，星海广场上连个人都没有。</p></li><li><p>下了三天自走棋，果然还是游戏好玩。</p></li><li><p>桌面又收拾了一下，电脑显示器和 pad 又重新布局，感觉还行吧。(图里有本书是彩蛋😆)
<center><img src=/pic/2019-12-01-weekly/desk.jpeg alt></center>
<center>图2，收拾后的桌面</center></p></li><li><p>29 号过生日来着。22岁了反倒没有什么生日的感觉，和往常日子一样看看书、写会儿代码就过去了。</p></li><li><p>找老师谈了谈毕设的事情，结论就是只要工作量足够，随便写什么，到时候题目再改。</p></li></ol><div class=footnotes><hr><ol><li id=fn:http-pages-cs-wi><a href=http://pages.cs.wisc.edu/~remzi/OSTEP/>http://pages.cs.wisc.edu/~remzi/OSTEP/</a> <a class=footnote-return href=#fnref:http-pages-cs-wi>↩</a></li><li id=fn:https-stackoverf><a href=https://stackoverflow.com/questions/40967594/does-gettimeofday-on-macos-use-a-system-call>https://stackoverflow.com/questions/40967594/does-gettimeofday-on-macos-use-a-system-call</a> <a class=footnote-return href=#fnref:https-stackoverf>↩</a></li></ol></div></main><div id=disqus_thread></div><script>(function(){var d=document,s=d.createElement('script');s.src='https://arjenzhou.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><footer><hr><a href=https://arjenzhou.github.io>Zhou Yang</a> | <a href=https://github.com/arjenzhou>Github</a> | <a href=mailto:zhouyang.zy@protonmail.com>Email</a></footer></body></html>